{% extends "base.html" %}

{% block adminContent %}
<div class="container-fluid mb-5">
    <div class="container">
        <div class="col-sm-12 col-md-12 col-lg-8 mx-auto">
            <div class="tm-bg-primary-dark">
                <div class="row">
                    <div class="">
                        <div class="tm-bg-primary-dark tm-block tm-block-settings text-center">
                            <h2 class="tm-block-title">Add Product</h2>

                            <!-- Display form errors (non-field) -->
                            {% if form.errors %}
                                <div class="alert alert-danger">
                                    <ul>
                                        {% for error in form.non_field_errors %}
                                            <li>{{ error }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}

                            <!-- Display field-specific errors -->
                            <form action="{% url 'scanProductUrl' %}" method="post" enctype="multipart/form-data" class="tm-signup-form row">
                                {% csrf_token %}
                                
                                <!-- Product Name Field -->
                                <div class="form-group col-lg-6">
                                    <label for="product_name">Product Name</label>
                                    <input
                                        id="product_name"
                                        name="product_name"
                                        type="text"
                                        class="form-control validate {% if form.product_name.errors %}is-invalid{% endif %}"
                                        value="{{ form.product_name.value|default_if_none:'' }}"
                                        required
                                    />
                                    {% if form.product_name.errors %}
                                        <div class="invalid-feedback">
                                            {{ form.product_name.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>
                                
                                <!-- Product Code Field -->
                                <div class="form-group col-lg-6">
                                    <label for="product_code">Product Code</label>
                                    <input
                                        id="product_code"
                                        name="product_code"
                                        type="text"
                                        class="form-control validate {% if form.product_code.errors %}is-invalid{% endif %}"
                                        value="{{ form.product_code.value|default_if_none:'' }}"
                                        required
                                    />
                                    {% if form.product_code.errors %}
                                        <div class="invalid-feedback">
                                            {{ form.product_code.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Price Field -->
                                <div class="form-group col-lg-6">
                                    <label for="price">Price</label>
                                    <input
                                        id="price"
                                        name="price"
                                        type="number"
                                        class="form-control validate {% if form.price.errors %}is-invalid{% endif %}"
                                        step="0.01"
                                        value="{{ form.price.value|default_if_none:'' }}"
                                        required
                                    />
                                    {% if form.price.errors %}
                                        <div class="invalid-feedback">
                                            {{ form.price.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Quantity Field -->
                                <div class="form-group col-lg-6">
                                    <label for="quantity">Quantity</label>
                                    <input
                                        id="quantity"
                                        name="quantity"
                                        type="number"
                                        class="form-control validate {% if form.quantity.errors %}is-invalid{% endif %}"
                                        value="{{ form.quantity.value|default_if_none:'' }}"
                                        required
                                    />
                                    {% if form.quantity.errors %}
                                        <div class="invalid-feedback">
                                            {{ form.quantity.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Expiry Date Field -->
                                <div class="form-group col-lg-6">
                                    <label for="expiry_date">Expiry Date</label>
                                    <input
                                        id="expiry_date"
                                        name="expiry_date"
                                        type="date"
                                        class="form-control validate {% if form.expiry_date.errors %}is-invalid{% endif %}"
                                        value="{{ form.expiry_date.value|default_if_none:'' }}"
                                        required
                                    />
                                    {% if form.expiry_date.errors %}
                                        <div class="invalid-feedback">
                                            {{ form.expiry_date.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Barcode Image Field -->
                                <div class="form-group col-lg-6">
                                    <label for="barcode_image">Product Barcode</label>
                                    <input
                                        id="barcode_image"
                                        name="barcode_image"
                                        type="file"
                                        class="form-control-file validate {% if form.barcode_image.errors %}is-invalid{% endif %}"
                                        required
                                    />
                                    {% if form.barcode_image.errors %}
                                        <div class="invalid-feedback">
                                            {{ form.barcode_image.errors.0 }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!-- Submit Button -->
                                <div class="form-group col-lg-6 mx-auto">
                                    <label class="tm-hide-sm">&nbsp;</label>
                                    <button
                                        type="submit"
                                        class="btn btn-primary btn-block text-uppercase">
                                        Register Product
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 {% if messages %}
    <div class="alert alert-success">
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>
{% endif %}
{% endblock %}
